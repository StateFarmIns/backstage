import{r as n,H as le,j}from"./iframe-DRkdG3e7.js";import{u as ce}from"./useStyles-JllvZotu.js";import{c as Y}from"./clsx-B-dksMZM.js";import{s as ue}from"./index-Dz0edcfd.js";import{c as Q,m as H,f as N,u as fe,b as pe,e as A,d as ee,h as me,a as he,t as Ce}from"./useAnimationsFinished-DoOALjje.js";const ge=n.createContext(void 0);function te(e=!0){const t=n.useContext(ge);if(t===void 0&&!e)throw new Error("Base UI: CheckboxGroupContext is missing. CheckboxGroup parts must be placed within <CheckboxGroup>.");return t}let Z=function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});const ne={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},ve={valid(e){return e===null?null:e?{[Z.valid]:""}:{[Z.invalid]:""}}},T=()=>{},ke=n.createContext({invalid:void 0,controlId:void 0,setControlId:T,labelId:void 0,setLabelId:T,messageIds:[],setMessageIds:T,name:void 0,validityData:{state:ne,errors:[],error:"",value:"",initialValue:null},setValidityData:T,disabled:void 0,touched:!1,setTouched:T,dirty:!1,setDirty:T,filled:!1,setFilled:T,focused:!1,setFocused:T,validate:()=>null,validationMode:"onBlur",validationDebounceTime:0,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1}});function U(e=!0){const t=n.useContext(ke);if(t.setControlId===T&&!e)throw new Error("Base UI: FieldRootContext is missing. Field parts must be placed within <Field.Root>.");return t}let $=function(e){return e.checked="data-checked",e.unchecked="data-unchecked",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e}({});function ae(e){return n.useMemo(()=>({checked(t){return e.indeterminate?{}:t?{[$.checked]:""}:{[$.unchecked]:""}}}),[e.indeterminate])}const be={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1},xe=n.createContext({formRef:{current:{fields:new Map}},errors:{},onClearErrors:()=>{}});function oe(){return n.useContext(xe)}function ie(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const ye=Object.keys(ne);function Re(){const{setValidityData:e,validate:t,messageIds:o,validityData:f,validationMode:u,validationDebounceTime:i,invalid:s,markedDirtyRef:d,controlId:l,state:h}=U(),{formRef:C}=oe(),r=n.useRef(-1),v=n.useRef(null);n.useEffect(()=>()=>{window.clearTimeout(r.current)},[]);const p=Q(async k=>{const a=v.current;if(!a)return;function g(y){return ye.reduce((R,b)=>(R[b]=y.validity[b],!y.validity.customError&&!d.current&&(R[b]=b==="valid"),R),{})}window.clearTimeout(r.current);const x=t(k);let c=null;typeof x=="object"&&x!==null&&"then"in x?c=await x:c=x;let S="";c!==null&&(S=Array.isArray(c)?c.join(`
`):c),a.setCustomValidity(S);const q=g(a);let w=[];Array.isArray(c)?w=c:c?w=[c]:a.validationMessage&&(w=[a.validationMessage]);const V={value:k,state:q,error:Array.isArray(c)?c[0]:c??a.validationMessage,errors:w,initialValue:f.initialValue};if(l){const y=C.current.fields.get(l);y&&C.current.fields.set(l,{...y,...ie(V,s)})}e(V)}),m=n.useCallback((k={})=>H({...o.length&&{"aria-describedby":o.join(" ")},...h.valid===!1&&{"aria-invalid":!0}},k),[o,h.valid]),P=n.useCallback((k={})=>H({onChange(a){if(a.nativeEvent.defaultPrevented||s||u!=="onChange")return;const g=a.currentTarget;if(g.value===""){p(g.value);return}window.clearTimeout(r.current),i?r.current=window.setTimeout(()=>{p(g.value)},i):p(g.value)}},m(k)),[m,s,u,i,p]);return n.useMemo(()=>({getValidationProps:m,getInputValidationProps:P,inputRef:v,commitValidation:p}),[m,P,p])}function re(e){const t=n.useRef(e);return N(()=>{t.current=e}),t}function Ve(e){const{formRef:t}=oe(),{invalid:o,markedDirtyRef:f,validityData:u,setValidityData:i}=U(),{value:s,id:d,controlRef:l,commitValidation:h}=e,C=re(e.getValue);N(()=>{let r=s;r===void 0&&(r=C.current?.()),u.initialValue===null&&r!==u.initialValue&&i(v=>({...v,initialValue:r}))},[i,s,u.initialValue,C]),N(()=>{d&&t.current.fields.set(d,{controlRef:l,validityData:ie(u,o),validate(){let r=s;r===void 0&&(r=C.current?.()),f.current=!0,le.flushSync(()=>h(r))}})},[h,l,t,C,d,o,f,u,s])}function Ie(e){const{id:t,checked:o,inputRef:f,onCheckedChange:u,name:i,value:s,defaultChecked:d=!1,readOnly:l=!1,required:h=!1,autoFocus:C=!1,indeterminate:r=!1,disabled:v=!1}=e,p=te(),m=p?.value,P=p?.setValue,k=p?.defaultValue,[a,g]=fe({controlled:i&&m?m.includes(i):o,default:i&&k?k.includes(i):d,name:"Checkbox",state:"checked"}),{labelId:x,setControlId:c,setTouched:S,setDirty:q,validityData:w,setFilled:V,setFocused:y,validationMode:R}=U(),b=n.useRef(null),{getValidationProps:G,getInputValidationProps:O,inputRef:D,commitValidation:M}=Re(),B=Q(u),E=pe(t);N(()=>(c(E),()=>{c(void 0)}),[E,c]),Ve({id:E,commitValidation:M,value:a,controlRef:b});const F=n.useRef(null),L=A(f,F,D);N(()=>{F.current&&(F.current.indeterminate=r,a&&V(!0))},[a,r,V]);const W=n.useCallback((z={})=>H({id:E,ref:b,type:"button",role:"checkbox",disabled:v,"aria-checked":r?"mixed":a,"aria-readonly":l||void 0,"aria-labelledby":x,onFocus(){y(!0)},onBlur(){const I=F.current;I&&(S(!0),y(!1),R==="onBlur"&&M(p?m:I.checked))},onClick(I){I.defaultPrevented||l||(I.preventDefault(),F.current?.click())}},G(z)),[G,E,v,r,a,l,x,y,S,R,M,p,m]),X=n.useCallback((z={})=>H({checked:a,disabled:v,name:i,...s!==void 0?{value:s}:{},required:h,autoFocus:C,ref:L,style:be,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(I){if(I.nativeEvent.defaultPrevented)return;const _=I.target.checked;if(q(_!==w.initialValue),g(_),B?.(_,I.nativeEvent),p||(V(_),R==="onChange"&&M(_)),i&&m&&P){const K=_?[...m,i]:m.filter(de=>de!==i);P(K,I.nativeEvent),V(K.length>0),R==="onChange"&&M(K)}}},O(z)),[O,a,v,i,s,h,C,L,p,q,w.initialValue,g,B,R,m,P,M,V]);return n.useMemo(()=>({checked:a,getButtonProps:W,getInputProps:X}),[a,W,X])}const se=n.createContext(void 0);function Pe(){const e=n.useContext(se);if(e===void 0)throw new Error("Base UI: CheckboxRootContext is missing. Checkbox parts must be placed within <Checkbox.Root>.");return e}const we=n.forwardRef(function(t,o){const{name:f,onCheckedChange:u,defaultChecked:i,parent:s=!1,readOnly:d=!1,indeterminate:l=!1,required:h=!1,disabled:C=!1,checked:r,render:v,className:p,inputRef:m,value:P,...k}=t,a=te(),g=a?.parent,x=g&&a.allValues;let c={};x&&(s?c=a.parent.getParentProps():f&&(c=a.parent.getChildProps(f)));const{checked:S=r,indeterminate:q=l,onCheckedChange:w=u,...V}=c,{state:y,disabled:R}=U(),b=R||a?.disabled||C,{checked:G,getInputProps:O,getButtonProps:D}=Ie({...t,disabled:b,inputRef:m,checked:S,indeterminate:q,onCheckedChange:w}),M=x?!!S:G,B=x?q:l;n.useEffect(()=>{g&&f&&g.disabledStatesRef.current.set(f,b)},[g,b,f]);const E=n.useMemo(()=>({...y,checked:M,disabled:b,readOnly:d,required:h,indeterminate:B}),[y,M,b,d,h,B]),F=ae(E),{renderElement:L}=ee({propGetter:D,render:v??"button",ref:o,state:E,className:p,customStyleHookMapping:F,extraProps:{...k,...V}});return j.jsxs(se.Provider,{value:E,children:[L(),!G&&t.name&&j.jsx("input",{type:"hidden",name:t.name,value:"off"}),j.jsx("input",{...O()})]})});function Me(e){const{enabled:t=!0,open:o,ref:f,onComplete:u}=e,i=re(o),s=Q(u),d=me(f,o);n.useEffect(()=>{t&&d(()=>{o===i.current&&s()})},[t,o,s,d,i])}const Ee=n.forwardRef(function(t,o){const{render:f,className:u,keepMounted:i=!1,...s}=t,d=Pe(),l=d.checked||d.indeterminate,{transitionStatus:h,setMounted:C}=he(l),r=n.useRef(null),v=A(o,r),p=n.useMemo(()=>({...d,transitionStatus:h}),[d,h]);Me({open:l,ref:r,onComplete(){l||C(!1)}});const m=ae(d),P=n.useMemo(()=>({...m,...Ce,...ve}),[m]),{renderElement:k}=ee({render:f??"span",ref:v,state:p,className:u,customStyleHookMapping:P,extraProps:s});return i||l?k():null}),J={"bui-CheckboxRoot":"_bui-CheckboxRoot_15bu1_20","bui-CheckboxLabel":"_bui-CheckboxLabel_15bu1_48","bui-CheckboxIndicator":"_bui-CheckboxIndicator_15bu1_66"},Te=n.forwardRef((e,t)=>{const{classNames:o,cleanedProps:f}=ce("Checkbox",e),{label:u,onChange:i,className:s,...d}=f,l=j.jsx(we,{ref:t,className:Y(o.root,J[o.root],s),onCheckedChange:i,...d,children:j.jsx(Ee,{className:Y(o.indicator,J[o.indicator]),children:j.jsx(ue,{size:12})})});return u?j.jsxs("label",{className:Y(o.label,J[o.label]),children:[l,u]}):l});Te.__docgenInfo={description:"@public",methods:[],displayName:"Checkbox",props:{label:{required:!1,tsType:{name:"string"},description:""},defaultChecked:{required:!1,tsType:{name:"boolean"},description:""},checked:{required:!1,tsType:{name:"boolean"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(checked: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"checked"}],return:{name:"void"}}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""}}};export{Te as C};
