import{u as $e,t as be,v as N,w as ge,x as te,y as re,i as _,z as ye,A as Pe,B as Te,C as he,g as P,l as b,D as Ee,E as me,F as xe,G as we,e as W}from"./useFocusRing-DcL9jFdt.js";import{r as E,a4 as ne}from"./iframe-DRkdG3e7.js";import{c as x,a as ae,n as Se}from"./utils-Do8wdv2E.js";const ie=E.createContext({isNative:!0,open:ke,useHref:e=>e});function Fe(e){let{children:r,navigate:i,useHref:l}=e,o=E.useMemo(()=>({isNative:!1,open:(p,v,d,y)=>{oe(p,g=>{le(g,v)?i(d,y):S(g,v)})},useHref:l||(p=>p)}),[i,l]);return ne.createElement(ie.Provider,{value:o},r)}function se(){return E.useContext(ie)}function le(e,r){let i=e.getAttribute("target");return(!i||i==="_self")&&e.origin===location.origin&&!e.hasAttribute("download")&&!r.metaKey&&!r.ctrlKey&&!r.altKey&&!r.shiftKey}function S(e,r,i=!0){var l,o;let{metaKey:p,ctrlKey:v,altKey:d,shiftKey:y}=r;$e()&&(!((o=window.event)===null||o===void 0||(l=o.type)===null||l===void 0)&&l.startsWith("key"))&&e.target==="_blank"&&(N()?p=!0:v=!0);let g=be()&&N()&&!ge()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:p,ctrlKey:v,altKey:d,shiftKey:y}):new MouseEvent("click",{metaKey:p,ctrlKey:v,altKey:d,shiftKey:y,bubbles:!0,cancelable:!0});S.isOpening=i,te(e),e.dispatchEvent(g),S.isOpening=!1}S.isOpening=!1;function oe(e,r){if(e instanceof HTMLAnchorElement)r(e);else if(e.hasAttribute("data-href")){let i=document.createElement("a");i.href=e.getAttribute("data-href"),e.hasAttribute("data-target")&&(i.target=e.getAttribute("data-target")),e.hasAttribute("data-rel")&&(i.rel=e.getAttribute("data-rel")),e.hasAttribute("data-download")&&(i.download=e.getAttribute("data-download")),e.hasAttribute("data-ping")&&(i.ping=e.getAttribute("data-ping")),e.hasAttribute("data-referrer-policy")&&(i.referrerPolicy=e.getAttribute("data-referrer-policy")),e.appendChild(i),r(i),e.removeChild(i)}}function ke(e,r){oe(e,i=>S(i,r))}function Be(e){let r=se();var i;const l=r.useHref((i=e.href)!==null&&i!==void 0?i:"");return{"data-href":e.href?l:void 0,"data-target":e.target,"data-rel":e.rel,"data-download":e.download,"data-ping":e.ping,"data-referrer-policy":e.referrerPolicy}}function Ne(e){let r=se();var i;const l=r.useHref((i=e?.href)!==null&&i!==void 0?i:"");return{href:e?.href?l:void 0,target:e?.target,rel:e?.rel,download:e?.download,ping:e?.ping,referrerPolicy:e?.referrerPolicy}}function Ye(e,r,i,l){!r.isNative&&e.currentTarget instanceof HTMLAnchorElement&&e.currentTarget.href&&!e.isDefaultPrevented()&&le(e.currentTarget,e)&&i&&(e.preventDefault(),r.open(e.currentTarget,e,i,l))}function Ke(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _e(e,r,i){Ke(e,r),r.set(e,i)}let A="default",Y="",D=new WeakMap;function Ae(e){if(re()){if(A==="default"){const r=_(e);Y=r.documentElement.style.webkitUserSelect,r.documentElement.style.webkitUserSelect="none"}A="disabled"}else if(e instanceof HTMLElement||e instanceof SVGElement){let r="userSelect"in e.style?"userSelect":"webkitUserSelect";D.set(e,e.style[r]),e.style[r]="none"}}function j(e){if(re()){if(A!=="disabled")return;A="restoring",setTimeout(()=>{ye(()=>{if(A==="restoring"){const r=_(e);r.documentElement.style.webkitUserSelect==="none"&&(r.documentElement.style.webkitUserSelect=Y||""),Y="",A="default"}})},300)}else if((e instanceof HTMLElement||e instanceof SVGElement)&&e&&D.has(e)){let r=D.get(e),i="userSelect"in e.style?"userSelect":"webkitUserSelect";e.style[i]==="none"&&(e.style[i]=r),e.getAttribute("style")===""&&e.removeAttribute("style"),D.delete(e)}}const ce=ne.createContext({register:()=>{}});ce.displayName="PressResponderContext";function Ce(e,r){return r.get?r.get.call(e):r.value}function fe(e,r,i){if(!r.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return r.get(e)}function Me(e,r){var i=fe(e,r,"get");return Ce(e,i)}function Ie(e,r,i){if(r.set)r.set.call(e,i);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=i}}function q(e,r,i){var l=fe(e,r,"set");return Ie(e,l,i),i}function Le(e){let r=E.useContext(ce);if(r){let{register:i,...l}=r;e=ae(l,e),i()}return xe(r,e.ref),e}var O=new WeakMap;class U{continuePropagation(){q(this,O,!1)}get shouldStopPropagation(){return Me(this,O)}constructor(r,i,l,o){_e(this,O,{writable:!0,value:void 0}),q(this,O,!0);var p;let v=(p=o?.target)!==null&&p!==void 0?p:l.currentTarget;const d=v?.getBoundingClientRect();let y,g=0,C,T=null;l.clientX!=null&&l.clientY!=null&&(C=l.clientX,T=l.clientY),d&&(C!=null&&T!=null?(y=C-d.left,g=T-d.top):(y=d.width/2,g=d.height/2)),this.type=r,this.pointerType=i,this.target=l.currentTarget,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.x=y,this.y=g}}const J=Symbol("linkClicked"),Q="react-aria-pressable-style",Z="data-react-aria-pressable";function Ge(e){let{onPress:r,onPressChange:i,onPressStart:l,onPressEnd:o,onPressUp:p,onClick:v,isDisabled:d,isPressed:y,preventFocusOnPress:g,shouldCancelOnPointerExit:C,allowTextSelectionOnPress:T,ref:H,...ue}=Le(e),[pe,X]=E.useState(!1),k=E.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:M,removeAllGlobalListeners:R}=Pe(),I=x((t,s)=>{let u=k.current;if(d||u.didFirePressStart)return!1;let n=!0;if(u.isTriggeringEvent=!0,l){let c=new U("pressstart",s,t);l(c),n=c.shouldStopPropagation}return i&&i(!0),u.isTriggeringEvent=!1,u.didFirePressStart=!0,X(!0),n}),K=x((t,s,u=!0)=>{let n=k.current;if(!n.didFirePressStart)return!1;n.didFirePressStart=!1,n.isTriggeringEvent=!0;let c=!0;if(o){let a=new U("pressend",s,t);o(a),c=a.shouldStopPropagation}if(i&&i(!1),X(!1),r&&u&&!d){let a=new U("press",s,t);r(a),c&&(c=a.shouldStopPropagation)}return n.isTriggeringEvent=!1,c}),L=x((t,s)=>{let u=k.current;if(d)return!1;if(p){u.isTriggeringEvent=!0;let n=new U("pressup",s,t);return p(n),u.isTriggeringEvent=!1,n.shouldStopPropagation}return!0}),m=x(t=>{let s=k.current;if(s.isPressed&&s.target){s.didFirePressStart&&s.pointerType!=null&&K(w(s.target,t),s.pointerType,!1),s.isPressed=!1,s.isOverTarget=!1,s.activePointerId=null,s.pointerType=null,R(),T||j(s.target);for(let u of s.disposables)u();s.disposables=[]}}),z=x(t=>{C&&m(t)}),F=x(t=>{d||v?.(t)}),V=x((t,s)=>{if(!d&&v){let u=new MouseEvent("click",t);Te(u,s),v(he(u))}}),ve=E.useMemo(()=>{let t=k.current,s={onKeyDown(n){if(B(n.nativeEvent,n.currentTarget)&&P(n.currentTarget,b(n.nativeEvent))){var c;ee(b(n.nativeEvent),n.key)&&n.preventDefault();let a=!0;if(!t.isPressed&&!n.repeat){t.target=n.currentTarget,t.isPressed=!0,t.pointerType="keyboard",a=I(n,"keyboard");let f=n.currentTarget,$=h=>{B(h,f)&&!h.repeat&&P(f,b(h))&&t.target&&L(w(t.target,h),"keyboard")};M(_(n.currentTarget),"keyup",Se($,u),!0)}a&&n.stopPropagation(),n.metaKey&&N()&&((c=t.metaKeyEvents)===null||c===void 0||c.set(n.key,n.nativeEvent))}else n.key==="Meta"&&(t.metaKeyEvents=new Map)},onClick(n){if(!(n&&!P(n.currentTarget,b(n.nativeEvent)))&&n&&n.button===0&&!t.isTriggeringEvent&&!S.isOpening){let c=!0;if(d&&n.preventDefault(),!t.ignoreEmulatedMouseEvents&&!t.isPressed&&(t.pointerType==="virtual"||we(n.nativeEvent))){let a=I(n,"virtual"),f=L(n,"virtual"),$=K(n,"virtual");F(n),c=a&&f&&$}else if(t.isPressed&&t.pointerType!=="keyboard"){let a=t.pointerType||n.nativeEvent.pointerType||"virtual",f=L(w(n.currentTarget,n),a),$=K(w(n.currentTarget,n),a,!0);c=f&&$,t.isOverTarget=!1,F(n),m(n)}t.ignoreEmulatedMouseEvents=!1,c&&n.stopPropagation()}}},u=n=>{var c;if(t.isPressed&&t.target&&B(n,t.target)){var a;ee(b(n),n.key)&&n.preventDefault();let $=b(n),h=P(t.target,b(n));K(w(t.target,n),"keyboard",h),h&&V(n,t.target),R(),n.key!=="Enter"&&G(t.target)&&P(t.target,$)&&!n[J]&&(n[J]=!0,S(t.target,n,!1)),t.isPressed=!1,(a=t.metaKeyEvents)===null||a===void 0||a.delete(n.key)}else if(n.key==="Meta"&&(!((c=t.metaKeyEvents)===null||c===void 0)&&c.size)){var f;let $=t.metaKeyEvents;t.metaKeyEvents=void 0;for(let h of $.values())(f=t.target)===null||f===void 0||f.dispatchEvent(new KeyboardEvent("keyup",h))}};if(typeof PointerEvent<"u"){s.onPointerDown=a=>{if(a.button!==0||!P(a.currentTarget,b(a.nativeEvent)))return;if(Ee(a.nativeEvent)){t.pointerType="virtual";return}t.pointerType=a.pointerType;let f=!0;if(!t.isPressed){t.isPressed=!0,t.isOverTarget=!0,t.activePointerId=a.pointerId,t.target=a.currentTarget,T||Ae(t.target),f=I(a,t.pointerType);let $=b(a.nativeEvent);"releasePointerCapture"in $&&$.releasePointerCapture(a.pointerId),M(_(a.currentTarget),"pointerup",n,!1),M(_(a.currentTarget),"pointercancel",c,!1)}f&&a.stopPropagation()},s.onMouseDown=a=>{if(P(a.currentTarget,b(a.nativeEvent))&&a.button===0){if(g){let f=me(a.target);f&&t.disposables.push(f)}a.stopPropagation()}},s.onPointerUp=a=>{!P(a.currentTarget,b(a.nativeEvent))||t.pointerType==="virtual"||a.button===0&&!t.isPressed&&L(a,t.pointerType||a.pointerType)},s.onPointerEnter=a=>{a.pointerId===t.activePointerId&&t.target&&!t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!0,I(w(t.target,a),t.pointerType))},s.onPointerLeave=a=>{a.pointerId===t.activePointerId&&t.target&&t.isOverTarget&&t.pointerType!=null&&(t.isOverTarget=!1,K(w(t.target,a),t.pointerType,!1),z(a))};let n=a=>{if(a.pointerId===t.activePointerId&&t.isPressed&&a.button===0&&t.target){if(P(t.target,b(a))&&t.pointerType!=null){let f=!1,$=setTimeout(()=>{t.isPressed&&t.target instanceof HTMLElement&&(f?m(a):(te(t.target),t.target.click()))},80);M(a.currentTarget,"click",()=>f=!0,!0),t.disposables.push(()=>clearTimeout($))}else m(a);t.isOverTarget=!1}},c=a=>{m(a)};s.onDragStart=a=>{P(a.currentTarget,b(a.nativeEvent))&&m(a)}}return s},[M,d,g,R,T,m,z,K,I,L,F,V]);return E.useEffect(()=>{if(!H)return;const t=_(H.current);if(!t||!t.head||t.getElementById(Q))return;const s=t.createElement("style");s.id=Q,s.textContent=`
@layer {
  [${Z}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),t.head.prepend(s)},[H]),E.useEffect(()=>{let t=k.current;return()=>{var s;T||j((s=t.target)!==null&&s!==void 0?s:void 0);for(let u of t.disposables)u();t.disposables=[]}},[T]),{isPressed:y||pe,pressProps:ae(ue,ve,{[Z]:!0})}}function G(e){return e.tagName==="A"&&e.hasAttribute("href")}function B(e,r){const{key:i,code:l}=e,o=r,p=o.getAttribute("role");return(i==="Enter"||i===" "||i==="Spacebar"||l==="Space")&&!(o instanceof W(o).HTMLInputElement&&!de(o,i)||o instanceof W(o).HTMLTextAreaElement||o.isContentEditable)&&!((p==="link"||!p&&G(o))&&i!=="Enter")}function w(e,r){let i=r.clientX,l=r.clientY;return{currentTarget:e,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,clientX:i,clientY:l}}function Oe(e){return e instanceof HTMLInputElement?!1:e instanceof HTMLButtonElement?e.type!=="submit"&&e.type!=="reset":!G(e)}function ee(e,r){return e instanceof HTMLInputElement?!de(e,r):Oe(e)}const Ue=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function de(e,r){return e.type==="checkbox"||e.type==="radio"?r===" ":Ue.has(e.type)}export{Fe as $,Ge as a,se as b,Ne as c,Ye as d,S as e,ce as f,Be as g};
