import{a as y,$ as D,d as I,b as L}from"./utils-DLW_tb52.js";import{r as p,a4 as E}from"./iframe-DB3V3M1P.js";import{$ as N}from"./Hidden-vGeag6Hf.js";import{a as O,b as T,d as w,c as F}from"./useFocusRing-BjAnfjlx.js";import{a as M}from"./usePress-tJArtEap.js";const A=7e3;let r=null;function C(t,e="assertive",i=A){r?r.announce(t,e,i):(r=new R,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?r.announce(t,e,i):setTimeout(()=>{r?.isAttached()&&r?.announce(t,e,i)},100))}class R{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let i=document.createElement("div");return i.setAttribute("role","log"),i.setAttribute("aria-live",e),i.setAttribute("aria-relevant","additions"),i}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,i="assertive",n=A){var a,o;if(!this.node)return;let s=document.createElement("div");typeof e=="object"?(s.setAttribute("role","img"),s.setAttribute("aria-labelledby",e["aria-labelledby"])):s.textContent=e,i==="assertive"?(a=this.assertiveLog)===null||a===void 0||a.appendChild(s):(o=this.politeLog)===null||o===void 0||o.appendChild(s),e!==""&&setTimeout(()=>{s.remove()},n)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}function V(t,e){let{elementType:i="button",isDisabled:n,onPress:a,onPressStart:o,onPressEnd:s,onPressUp:g,onPressChange:l,preventFocusOnPress:$,allowFocusWhenDisabled:x,onClick:h,href:v,target:P,rel:c,type:u="button"}=t,d;i==="button"?d={type:u,disabled:n,form:t.form,formAction:t.formAction,formEncType:t.formEncType,formMethod:t.formMethod,formNoValidate:t.formNoValidate,formTarget:t.formTarget,name:t.name,value:t.value}:d={role:"button",href:i==="a"&&!n?v:void 0,target:i==="a"?P:void 0,type:i==="input"?u:void 0,disabled:i==="input"?n:void 0,"aria-disabled":!n||i==="input"?void 0:n,rel:i==="a"?c:void 0};let{pressProps:b,isPressed:m}=M({onPressStart:o,onPressEnd:s,onPressChange:l,onPress:a,onPressUp:g,onClick:h,isDisabled:n,preventFocusOnPress:$,ref:e}),{focusableProps:f}=O(t,e);x&&(f.tabIndex=n?-1:f.tabIndex);let _=y(f,b,T(t,{labelable:!0}));return{isPressed:m,buttonProps:y(d,_,{"aria-haspopup":t["aria-haspopup"],"aria-expanded":t["aria-expanded"],"aria-controls":t["aria-controls"],"aria-pressed":t["aria-pressed"],"aria-current":t["aria-current"],"aria-disabled":t["aria-disabled"]})}}const S=p.createContext(null),k=p.createContext({}),Y=N(function(e,i){[e,i]=D(e,i,k);let n=e,{isPending:a}=n,{buttonProps:o,isPressed:s}=V(e,i);o=U(o,a);let{focusProps:g,isFocused:l,isFocusVisible:$}=w(e),{hoverProps:x,isHovered:h}=F({...e,isDisabled:e.isDisabled||a}),v={isHovered:h,isPressed:(n.isPressed||s)&&!a,isFocused:l,isFocusVisible:$,isDisabled:e.isDisabled||!1,isPending:a??!1},P=I({...e,values:v,defaultClassName:"react-aria-Button"}),c=L(o.id),u=L(),d=o["aria-labelledby"];a&&(d?d=`${d} ${u}`:o["aria-label"]&&(d=`${c} ${u}`));let b=p.useRef(a);p.useEffect(()=>{let f={"aria-labelledby":d||c};(!b.current&&l&&a||b.current&&l&&!a)&&C(f,"assertive"),b.current=a},[a,l,d,c]);let m=T(e,{global:!0});return delete m.onClick,E.createElement("button",{...y(m,P,o,g,x),type:o.type==="submit"&&a?"button":o.type,id:c,ref:i,"aria-labelledby":d,slot:e.slot||void 0,"aria-disabled":a?"true":o["aria-disabled"],"data-disabled":e.isDisabled||void 0,"data-pressed":v.isPressed||void 0,"data-hovered":h||void 0,"data-focused":l||void 0,"data-pending":a||void 0,"data-focus-visible":$||void 0},E.createElement(S.Provider,{value:{id:u}},P.children))});function U(t,e){if(e){for(const i in t)i.startsWith("on")&&!(i.includes("Focus")||i.includes("Blur"))&&(t[i]=void 0);t.href=void 0,t.target=void 0}return t}export{Y as $,k as a,C as b};
