import{a as k}from"./RSPContexts-__62g8ge.js";import{$ as y,c as p,f as w,l as F,m as j,h as q,b as H}from"./utils-rpcJFcam.js";import{b as S,c as N,d as g,e as T,a as W}from"./Form-FUYRYxpg.js";import{d as z,c as A,a as G}from"./useFocusRing-DM3aheLR.js";import{r as c,a4 as P}from"./iframe-BpNetfkk.js";import{a as J}from"./usePress-BOhlT-jr.js";import{$ as K,a as O}from"./useToggleState-dTLYZbmv.js";import{$ as L}from"./VisuallyHidden-C3su4P0r.js";function C(a,e,d){let l=S({...a,value:e.isSelected}),{isInvalid:x,validationErrors:h,validationDetails:f}=l.displayValidation,{labelProps:u,inputProps:r,isSelected:n,isPressed:o,isDisabled:v,isReadOnly:$}=K({...a,isInvalid:x},e,d);N(a,l,d);let{isIndeterminate:b,isRequired:s,validationBehavior:t="aria"}=a;c.useEffect(()=>{d.current&&(d.current.indeterminate=!!b)});let{pressProps:m}=J({isDisabled:v||$,onPress(){let{[g]:i}=a,{commitValidation:R}=i||l;R()}});return{labelProps:y(u,m,c.useMemo(()=>({onMouseDown:i=>i.preventDefault()}),[])),inputProps:{...r,checked:n,"aria-required":s&&t==="aria"||void 0,required:s&&t==="native"},isSelected:n,isPressed:o,isDisabled:v,isReadOnly:$,isInvalid:x,validationErrors:h,validationDetails:f}}const Q=new WeakMap;function U(a,e,d){const l=O({isReadOnly:a.isReadOnly||e.isReadOnly,isSelected:e.isSelected(a.value),defaultSelected:e.defaultValue.includes(a.value),onChange(i){i?e.addValue(a.value):e.removeValue(a.value),a.onChange&&a.onChange(i)}});let{name:x,form:h,descriptionId:f,errorMessageId:u,validationBehavior:r}=Q.get(e);var n;r=(n=a.validationBehavior)!==null&&n!==void 0?n:r;let{realtimeValidation:o}=S({...a,value:l.isSelected,name:void 0,validationBehavior:"aria"}),v=c.useRef(T),$=()=>{e.setInvalid(a.value,o.isInvalid?o:v.current)};c.useEffect($);let b=e.realtimeValidation.isInvalid?e.realtimeValidation:o,s=r==="native"?e.displayValidation:b;var t;let m=C({...a,isReadOnly:a.isReadOnly||e.isReadOnly,isDisabled:a.isDisabled||e.isDisabled,name:a.name||x,form:a.form||h,isRequired:(t=a.isRequired)!==null&&t!==void 0?t:e.isRequired,validationBehavior:r,[g]:{realtimeValidation:b,displayValidation:s,resetValidation:e.resetValidation,commitValidation:e.commitValidation,updateValidation(i){v.current=i,$()}}},l,d);return{...m,inputProps:{...m.inputProps,"aria-describedby":[a["aria-describedby"],e.isInvalid?u:null,f].filter(Boolean).join(" ")||void 0}}}const X=c.createContext(null),ne=c.forwardRef(function(e,d){let{inputRef:l=null,...x}=e;[e,d]=p(x,d,k);let{validationBehavior:h}=w(W)||{};var f,u;let r=(u=(f=e.validationBehavior)!==null&&f!==void 0?f:h)!==null&&u!==void 0?u:"native",n=c.useContext(X),o=F(c.useMemo(()=>j(l,e.inputRef!==void 0?e.inputRef:null),[l,e.inputRef])),{labelProps:v,inputProps:$,isSelected:b,isDisabled:s,isReadOnly:t,isPressed:m,isInvalid:i}=n?U({...q(e),value:e.value,children:typeof e.children=="function"?!0:e.children},n,o):C({...q(e),children:typeof e.children=="function"?!0:e.children,validationBehavior:r},O(e),o),{isFocused:R,isFocusVisible:I,focusProps:E}=z(),M=s||t,{hoverProps:_,isHovered:D}=A({...e,isDisabled:M}),B=H({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:b,isIndeterminate:e.isIndeterminate||!1,isPressed:m,isHovered:D,isFocused:R,isFocusVisible:I,isDisabled:s,isReadOnly:t,isInvalid:i,isRequired:e.isRequired||!1}}),V=G(e,{global:!0});return delete V.id,delete V.onClick,P.createElement("label",{...y(V,v,_,B),ref:d,slot:e.slot||void 0,"data-selected":b||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":m||void 0,"data-hovered":D||void 0,"data-focused":R||void 0,"data-focus-visible":I||void 0,"data-disabled":s||void 0,"data-readonly":t||void 0,"data-invalid":i||void 0,"data-required":e.isRequired||void 0},P.createElement(L,{elementType:"span"},P.createElement("input",{...y($,E),ref:o})),B.children)});export{ne as $};
