import{r as a,j as D}from"./iframe-DRkdG3e7.js";import{c as U}from"./clsx-B-dksMZM.js";import{u as L}from"./useStyles-JllvZotu.js";import{u as pe,a as fe,b as X,c as T,t as me,d as H,e as K,f as S,m as j,g as Y,h as be}from"./useAnimationsFinished-DoOALjje.js";const he=()=>{};function Ce(e){const{open:i,defaultOpen:t,onOpenChange:n,disabled:o}=e,[p,h]=pe({controlled:i,default:t,name:"Collapsible",state:"open"}),{mounted:f,setMounted:c,transitionStatus:C}=fe(p,!0),[d,l]=a.useState(X()),m=T(b=>{n?.(b),h(b)});return a.useMemo(()=>({panelId:d,disabled:o,mounted:f,open:p,setPanelId:l,setMounted:c,setOpen:m,transitionStatus:C}),[d,o,f,p,l,c,m,C])}const B=a.createContext(void 0);function Z(){const e=a.useContext(B);if(e===void 0)throw new Error("Base UI: CollapsibleRootContext is missing. Collapsible parts must be placed within <Collapsible.Root>.");return e}const ge={"data-open":""},Pe={"data-closed":""},Re={open(e){return e?{"data-panel-open":""}:null}},ye={open(e){return e?ge:Pe}},ee={...ye,...me},te=a.forwardRef(function(i,t){const{children:n,className:o,defaultOpen:p=!1,disabled:h=!1,onOpenChange:f,open:c,render:C,...d}=i,l=Ce({open:c,defaultOpen:p,onOpenChange:f??he,disabled:h}),m=a.useMemo(()=>({open:l.open,disabled:l.disabled,transitionStatus:l.transitionStatus}),[l.open,l.disabled,l.transitionStatus]),b=a.useMemo(()=>({...l,state:m}),[l,m]),{renderElement:P}=H({render:C??"div",className:o,state:m,ref:t,extraProps:{children:n,...d},customStyleHookMapping:ee});return C!==null?D.jsx(B.Provider,{value:b,children:P()}):D.jsx(B.Provider,{value:b,children:n})});function Ne(e){const{rootElementName:i=""}=e,[t,n]=a.useState(i.toUpperCase()),o=a.useCallback(p=>{n(p?.tagName??"")},[]);return{rootElementName:t,updateRootElementName:o}}const xe=a.createContext(void 0);function Ee(e=!1){const i=a.useContext(xe);if(i===void 0&&!e)throw new Error("Base UI: CompositeRootContext is missing. Composite parts must be placed within <Composite.Root>.");return i}function we(e={}){const{buttonRef:i,disabled:t=!1,focusableWhenDisabled:n,tabIndex:o,type:p,elementName:h}=e,f=a.useRef(null),{rootElementName:c,updateRootElementName:C}=Ne({rootElementName:h}),d=Ee(!0)!==void 0,l=T(()=>{const u=f.current;return c==="BUTTON"||c==="INPUT"&&["button","submit","reset"].includes(u?.type)}),m=T(()=>{const u=f.current;return!!(c==="A"&&u?.href)}),b=K(C,i,f),P=a.useMemo(()=>{const u={};return o!==void 0&&!d&&(u.tabIndex=o),c==="BUTTON"||c==="INPUT"?n||d?u["aria-disabled"]=t:d||(u.disabled=t):c!==""&&(c!=="A"?(u.role="button",d||(u.tabIndex=o??0)):o&&!d&&(u.tabIndex=o),t&&(u["aria-disabled"]=t,d||(u.tabIndex=n?o??0:-1))),u},[t,c,n,d,o]);return S(()=>{const u=f.current;u instanceof HTMLButtonElement&&d&&t&&P.disabled===void 0&&u.disabled&&(u.disabled=!1)},[t,P.disabled,d]),{getButtonProps:a.useCallback((u={})=>{const{onClick:N,onMouseDown:w,onKeyUp:E,onKeyDown:M,onPointerDown:R,...O}=u;return j({type:p,onClick(s){if(t){s.preventDefault();return}N?.(s)},onMouseDown(s){t||w?.(s)},onKeyDown(s){(t&&n&&s.key!=="Tab"||s.target===s.currentTarget&&!l()&&s.key===" ")&&s.preventDefault(),t||(Y(s),M?.(s)),!s.baseUIHandlerPrevented&&s.target===s.currentTarget&&!l()&&!m()&&s.key==="Enter"&&!t&&(N?.(s),s.preventDefault())},onKeyUp(s){t||(Y(s),E?.(s)),!s.baseUIHandlerPrevented&&s.target===s.currentTarget&&!l()&&!t&&s.key===" "&&N?.(s)},onPointerDown(s){if(t){s.preventDefault();return}R?.(s)},ref:b},P,O)},[P,t,n,l,m,b,p]),buttonRef:b}}function Me(e){const{panelId:i,disabled:t,open:n,rootRef:o,setOpen:p}=e,{getButtonProps:h,buttonRef:f}=we({disabled:t,focusableWhenDisabled:!0,type:"button"}),c=K(o,f);return{getRootProps:a.useCallback((d={})=>j({type:"button","aria-controls":i,"aria-expanded":n,disabled:t,onClick(){p(!n)},ref:c},d,h),[i,t,h,c,n,p])}}const ne=a.forwardRef(function(i,t){const{panelId:n,open:o,setOpen:p,state:h,disabled:f}=Z(),{className:c,disabled:C=f,id:d,render:l,...m}=i,{getRootProps:b}=Me({disabled:C,panelId:n,open:o,setOpen:p,rootRef:t}),{renderElement:P}=H({propGetter:b,render:l??"button",state:h,className:c,extraProps:m,customStyleHookMapping:Re});return P()});let A=null,I;function Oe(){return A==null&&(A=document.createElement("div")),I===void 0&&(I=A.computedStyleMap!==void 0),I}function Se(e){return e&&e.ownerDocument||document}function oe(e){return Se(e).defaultView||window}const De=[];function z(e){a.useEffect(e,De)}function ke(e){return Oe()?e.computedStyleMap().get("animation-name")?.value??void 0:oe(e).getComputedStyle(e).animationName}let F;function J(e){if(F===void 0){const i=typeof CSS<"u"&&typeof CSS.supports=="function"&&CSS.supports("content-visibility","hidden"),t="onbeforematch"in oe(e);F=i&&t}return F}function Te(e){const{hiddenUntilFound:i,panelId:t,keepMounted:n,open:o,mounted:p,ref:h,setPanelId:f,setMounted:c,setOpen:C}=e,d=X(t),l=a.useRef(null),[{height:m,width:b},P]=a.useState({height:0,width:0}),k=a.useRef("none"),u=a.useRef(null),N=a.useRef(!1);S(()=>(f(!n&&!o?void 0:d),()=>{f(void 0)}),[d,f,n,o]);const w=T(r=>{if(!r)return;l.current=r;const g=ke(r);k.current=g??"none",u.current=r.style.transitionDuration}),E=K(h,w),M=be(l),R=o||p,O=a.useRef(!1),s=a.useRef(R),v=a.useCallback(()=>{const r=l.current;if(!r)return;function g(){N.current=!0}function y(){N.current=!1}function x(){N.current=!1}return r.addEventListener("transitioncancel",x),r.addEventListener("transitionend",y),r.addEventListener("transitionrun",g),()=>{r.removeEventListener("transitioncancel",x),r.removeEventListener("transitionend",y),r.removeEventListener("transitionrun",g)}},[]);S(()=>{const{current:r}=l;let g=-1,y=-1;if(r){const x=O.current,le=s.current,ue=N.current,ce=r.style.animationName==="none"?"":r.style.animationName,de=u.current,$=x||le;r.style.animationName="none";const V=!o&&!p;if(!ue||V){n||v();const G=V?{height:0,width:0}:r.getBoundingClientRect();P({height:G.height,width:G.width})}r.style.animationName=$?"none":ce,r.style.transitionDuration=$?"0s":de??"",M(()=>{c(o),x&&(O.current=!1,g=requestAnimationFrame(()=>{y=requestAnimationFrame(()=>{r.style.transitionDuration=u.current??""})}))})}return()=>{cancelAnimationFrame(g),cancelAnimationFrame(y)}},[p,n,o,v,M,c,f]),z(()=>{const r=l.current;let g=-1,y=-1;const x=requestAnimationFrame(()=>{s.current=!1,r&&(g=requestAnimationFrame(()=>{y=requestAnimationFrame(()=>{r.style.transitionDuration=u.current??""})}))});return()=>{cancelAnimationFrame(x),cancelAnimationFrame(g),cancelAnimationFrame(y)}}),z(v),a.useEffect(function(){const{current:g}=l;if(!g||!J(g))return;function y(x){x.preventDefault(),O.current=!0,C(!0)}return g.addEventListener("beforematch",y),()=>{g.removeEventListener("beforematch",y)}},[C]),S(()=>{const{current:r}=l;r&&J(r)&&r?.hidden&&!R&&i===!0&&(r.hidden="until-found")},[i,R]);const _=i?"until-found":"hidden",q=a.useCallback((r={})=>j({id:d,hidden:R?void 0:!!_,ref:E},r),[_,d,R,E]);return a.useMemo(()=>({getRootProps:q,height:m,width:b,isOpen:R}),[q,m,b,R])}let Q=function(e){return e.collapsiblePanelHeight="--collapsible-panel-height",e.collapsiblePanelWidth="--collapsible-panel-width",e}({});const se=a.forwardRef(function(i,t){const{className:n,hiddenUntilFound:o,id:p,keepMounted:h,render:f,...c}=i,{mounted:C,open:d,panelId:l,setPanelId:m,setMounted:b,setOpen:P,state:k}=Z();S(()=>{p&&m(p)},[p,m]);const u=o??!1,{getRootProps:N,height:w,width:E,isOpen:M}=Te({hiddenUntilFound:u,panelId:l,keepMounted:h??!1,mounted:C,open:d,ref:t,setPanelId:m,setMounted:b,setOpen:P}),{renderElement:R}=H({propGetter:N,render:f??"div",state:k,className:n,extraProps:{...c,style:{...c.style,[Q.collapsiblePanelHeight]:w?`${w}px`:void 0,[Q.collapsiblePanelWidth]:E?`${E}px`:void 0}},customStyleHookMapping:ee});return!h&&!M&&!u?null:R()}),W={"bui-CollapsiblePanel":"_bui-CollapsiblePanel_1ak39_20"},re=a.forwardRef(({className:e,...i},t)=>{const{classNames:n,cleanedProps:o}=L("Collapsible",i);return D.jsx(te,{ref:t,className:U(n.root,W[n.root],e),...o})});re.displayName=te.displayName;const ae=a.forwardRef(({className:e,...i},t)=>{const{classNames:n,cleanedProps:o}=L("Collapsible",i);return D.jsx(ne,{ref:t,className:U(n.trigger,W[n.trigger],e),...o})});ae.displayName=ne.displayName;const ie=a.forwardRef(({className:e,...i},t)=>{const{classNames:n,cleanedProps:o}=L("Collapsible",i);return D.jsx(se,{ref:t,className:U(n.panel,W[n.panel],e),...o})});ie.displayName=se.displayName;const Be={Root:re,Trigger:ae,Panel:ie};export{Be as C,he as N};
